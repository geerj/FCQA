!function(){function e(t,r,n){function o(i,a){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var m=r[i]={exports:{}};t[i][0].call(m.exports,function(e){return o(t[i][1][e]||e)},m,m.exports,e,t,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}return e}()({1:[function(e,t,r){"use strict";e("./partials.compiled"),e("./module"),e("./includes");var n=(0,eval)("this");n.registerUiModule&&n.registerUiModule("ec-forms-tracking")},{"./includes":9,"./module":10,"./partials.compiled":11}],2:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("base-component"),l={search:"=",sentBySort:"=",sortBy:"=",category:"=",type:"@",endpoint:"&",location:"=",count:"=?",emplId:"="},m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"controller",value:["$rootScope","$scope","$filter","$location","ssStringHlp","ssAsync","ssEnum","moment","ssFormInstancesApi","ssProductAccessSvc","ssActiveUserSvc","ssStorage","ssToastHlp","ssDateByOrgHlp","ssDueDateHlp",function(e,t,r,o,s,i,a,c,l,m,u,p,f,d,g){function h(){null!=w.getFormCountsPromise&&(w.getFormCountsPromise.$abort(),w.getFormCountsPromise=null),w.getFormCountsPromise=i(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={from:w.dateSent.from.toISOString(),to:w.dateSent.to.toISOString()},n=p.load("trackFormsFilters"),C&&n&&(t.category=n[0].category,t.search=n[0].search,t.location=n[0].location,t.sentBySort=n[0].sentby,t.sortBy=n[0].sort),null!=t.search&&t.search.length>0&&(r["filter[search]"]=t.search),null!=t.location&&"-1"!==t.location&&(r["filter[locationIds]"]=t.location),"recentlysent"===t.sortBy?r["sort["+t.sortBy+"]"]="desc":r["sort["+t.sortBy+"]"]="asc",null!=t.sentBySort&&"0"!==t.sentBySort&&(delete r["filter[formadministrator]"],delete r["filter[creatorId]"],r["filter["+t.sentBySort+"]"]=t.emplId),null!==y()&&(r.resolvemethod=y()),e.next=11,l.getFormCounts(r);case 11:w.counts=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),f.warn("There was a problem getting the total counts for each section. Try refreshing your browser.","Form Counts");case 17:return e.prev=17,w.getFormCountsPromise=null,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[0,14,17,20]])}))()}function y(){var e=o.search().resolvemethod;return"ReadModel"===e||"Mongo"===e?e:null}function v(){R.loading=!0,null!=w.getFormsPromise&&(w.getFormsPromise.$abort(),w.getFormsPromise=null),w.getFormsPromise=i(regeneratorRuntime.mark(function e(){var r,o,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_++,r=(_-1)*I,o=t.endpoint(),o.config.limit=I,o.config.offset=r,s=p.load("trackFormsFilters"),C&&s&&(t.category=s[0].category,t.search=s[0].search,t.location=s[0].location,t.sentBySort=s[0].sentby,t.sortBy=s[0].sort),null!=t.search&&t.search.length>0&&(o.config["filter[search]"]=t.search),null!=t.location&&"-1"!==t.location&&(o.config["filter[locationIds]"]=t.location),"recentlysent"===t.sortBy?o.config["sort["+t.sortBy+"]"]="desc":o.config["sort["+t.sortBy+"]"]="asc",null!=t.sentBySort&&"0"!==t.sentBySort&&(delete o.config["filter[formadministrator]"],delete o.config["filter[creatorId]"],o.config["filter["+t.sentBySort+"]"]=t.emplId),e.prev=12,e.next=15,o.api(o.config);case 15:i=e.sent,i&&(i.forEach(b),O=P(i),R.formsAndPackets=[].concat(n(R.formsAndPackets),n(O)),R.showInfScroll=i.length&&i.length<parseInt(i.$headers["total-results"],10)),e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(12),e.t0;case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(0),R.showInfScroll=!1,f.error("There was an error retrieving Form Instances","");case 28:return e.prev=28,R.loading=!1,R.scrolling=!1,C=!1,p.clear("trackFormsFilters"),w.getFormsPromise=null,e.finish(28);case 35:case"end":return e.stop()}},e,this,[[0,24,28,35],[12,19]])}))()}function b(e){var t=a.formStatus.byValue(e._statusId).toLowerCase();e.isPacket=!1,e.primaryRecipient=e._employee,e.creatorId=e._creator.employeeId,e.isComplete="complete"===t,e.isRejected="rejected"===t,e.dueDateStatus=g.dueStatus(e,w.org),e.totalSteps=e._steps.filter(function(e){return 3!==e._stepAction}).length,e.searchText=e.name+" "+e.primaryRecipient.name,e.sentDate=d.utcIsoToRelativeMoment(e._createdUtc,w.org).format("M/D/YY"),e._lastReminderSentUtc&&(e.reminderSentDate=d.utcIsoToRelativeMoment(e._lastReminderSentUtc,w.org).format("M/D/YY")),S(e),k(e)}function S(e){null!=e.currentStep&&(e.currentStepIndex=e._steps.indexOf(e.currentStep),e.prevStep=0===e.currentStepIndex?e._steps[0]:e._steps[e.currentStepIndex-1],e.prevStepNum=e._steps.indexOf(e.prevStep)+1,e.currentStepAction=a.stepAction.byValue(e.currentStep._stepAction)||"undefined",null!=e.currentStep._stepParticipant&&(e.isUser=t.emplId===e.currentStep._stepParticipant.employeeIds[0],e.currentStepParticipantName=e.currentStep._stepParticipant.name||"undefined",e.currentStepMeta=e.isRejected?"Denied by "+e.currentStepParticipantName:e.currentStepAction+" | "+e.currentStepParticipantName))}function k(e){if(null!=e.currentStepIndex){var t=!1;e._steps.forEach(function(r){r.id===e._steps[e.currentStepIndex].id?(r.stepStatus=a.formStatus.byValue(e._statusId),t=!0):r.stepStatus=t?a.formStatus.byValue(0):a.formStatus.byValue(1),r.stepStatus=r.stepStatus.toLowerCase()})}}function P(e){var r=new Map;return e.map(function(e){var n;if(!e.isInPacket)return e;if(!r.has(e._packetInstance.instanceId)){var o=e._packetInstance.completeFormInstanceIds.length,s=e._packetInstance.incompleteFormInstanceIds.length,i={type:t.type,_employee:e._employee,name:e._packetInstance.name,isPacket:!0,primaryRecipient:e.primaryRecipient,creatorId:e.creatorId,searchText:e._packetInstance.name+" "+e.primaryRecipient.name,currentStepMeta:null,dueDateStatus:null,sentDate:e.sentDate,isRejected:!1,isComplete:0===s,content:[],completeCount:o,incompleteCount:s,totalFormsCount:o+s};i.packetCount=i.isComplete?"complete":i.completeCount+"/"+i.totalFormsCount+" forms complete",r.set(e._packetInstance.instanceId,i)}return n=r.get(e._packetInstance.instanceId),n.content.push(e),n.dueDateStatus=function(){var e=n.content.filter(function(e){return e.dueDateStatus&&"overdue"===e.dueDateStatus.class}),t=n.content.filter(function(e){return e.dueDateStatus&&"due-soon"===e.dueDateStatus.class});return e.length?{class:"overdue"}:t.length?{class:"due-soon"}:null}(),n.currentStepMeta=function(){var e=n.content.filter(function(e){return e.isRejected});return e.length?(n.isRejected=!0,1===e.length?"form denied by "+e[0].currentStepParticipantName:e.length>1?e.length+" forms denied":void 0):""}(),n.content.length>1?null:(n.countByType=function(e){return filter()},n)}).filter(function(e){return null!=e})}var w=t.routeVm=t.$root.utils.findInParentScope("routeVm",t),I=50,_=0,C=!0,O=[],R=t.vm={loading:!1,showInfScroll:!1,formsAndPackets:[]},x=t.go={refreshData:i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O=R.formsAndPackets=[],_=0,e.next=5,v();case 5:return e.next=7,h();case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}},e,this,[[0,9]])}))};t.scrollData=function(){R.scrolling||(R.scrolling=!0,v())},t.$watchGroup(["sortBy","search","sentBySort","location","routeVm.dateSent"],function(e,t){C||e===t||x.refreshData()}),t.$watch("type",function(e,t){v(),h()})}]}]),t}(c.Component);angular.module("ec-forms-tracking-components").directive("cmpTrackedFormGroup",function(){return new m(l,"tracked-form-group")})},{"base-component":4}],3:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("base-component"),l={form:"=",statusUpdated:"&?",type:"="},m=new Map,u=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"controller",value:["$scope","$location","$window","filenameHlp","ssStorage","ssAsync","ssEnum","ssFormInstancesApi","ssEmployeeApi","ssFormTemplatesApi","ssToastHlp","ssModalSvc","ssObjectHlp",function(e,t,r,o,s,i,a,c,l,u,p,f,d){function g(e){var t=[],r=e._steps.filter(function(e){return b.test(e._formFieldValues)&&3!==e._stepAction}).map(function(e){return e._formFieldValues});return r.length&&r.forEach(function(e){var r=JSON.parse(e);Object.keys(r).filter(function(e){return Array.isArray(r[e])}).filter(function(e){return r[e].every(function(e){return!!e.filename})}).forEach(function(e){var o;t=(o=t).concat.apply(o,n(h(r[e])))})}),t}function h(e){return e.map(function(e){var t=o.getExtension(e.filename),r=o.getIcon(t);return{id:e.id,filename:e.filename,ext:t,icon:r}})}var y=e.routeVm=e.$root.utils.findInParentScope("routeVm",e),v=e.form,b=/.*{"filename":.*/,S=e.vm={loadingContact:!0,openDetails:!1,showContactToggle:!0};S.showContactToggle=function(t){return!!d.glean(e,function(e){return e.$root.isPermitted.activeUser.idmAdministrator},!1)||["emails","phoneNumbers"].map(function(e){return!!t._employee.meta&&t._employee.meta.permissions.permittedActualProperties[e]}).some(function(e){return 0!==e})}(e.form),e.$watch("form",function(e,t){e.isPacket?e.content.forEach(function(e){return e.filesOnInstance=g(e)}):e.filesOnInstance=g(e)});e.go={download:function(e){e.forEach(function(e){u.getFileUrl({id:e.id}).then(function(e){r.open(e._string,"_blank")})})},viewForm:function(e){s.save("trackFormsFilters",[{category:y.selectedCategory,sort:y.sortBy,search:y.search,sentby:y.sentByParticipant,location:y.sentToLocation}],{persistent:!0,expires:!1}),t.url("/ec-forms/inbox/"+e.id+"?returnUrl=/ec-forms-tracking/")},remove:function(t){var r=t.isInPacket?"Form in Packet":"Form",n={title:"Delete "+r,content:"Are you sure you want to delete this form? This form will be deleted and cannot be retrieved.",primaryText:"Delete",secondaryText:"Cancel"};f.showDestructive(n).then(function(){i(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$remove();case 3:p.success("Form removed successfully."),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),p.error('There was an error deleting "'+t.name+'"',"Error");case 9:return r.prev=9,e.statusUpdated(),r.finish(9);case 12:case"end":return r.stop()}},r,this,[[0,6,9,12]])}))()})},toggleContact:function(){i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S.loadingContact=!0,m.has(v.primaryRecipient.employeeId)){e.next=9;break}return e.next=5,l.get({id:v.primaryRecipient.employeeId,include:"PhoneNumbers,Emails"});case 5:t=e.sent,m.set(v.primaryRecipient.employeeId,t),e.next=10;break;case 9:t=m.get(v.primaryRecipient.employeeId);case 10:S.empPhone=t.bestContactNumber&&t.bestContactNumber.formatted||"None",S.empEmail=t.bestContactEmail||"None",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),p.error('There was an error retreiving employee information for "'+v.primaryRecipient.name+'"',"Error");case 17:return e.prev=17,S.loadingContact=!1,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[0,14,17,20]])}))()},updateFormStatus:function(t,r){var n=a.formStatus[r.toLowerCase()],o=t.isInPacket?"Packet":"Form",s={title:"Archive "+o,content:"Are you sure you want to archive this "+o+"?",primaryText:"Archive",secondaryText:"Cancel"};f.showDestructive(s).then(function(){i(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,c.updateStatus({id:t.id,newStatus:n});case 3:p.success(t.name+" has been marked as "+r,"Form Status Updated",!1),e.statusUpdated(),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),p.error("There was an error updating the status of "+t.name,"Error",!1);case 10:case"end":return o.stop()}},o,this,[[0,7]])}))()})},updateEmpRecord:function(t){var r={title:"<h2>Move to Employee Record</h2>",personnel:a.personnelCategory,medical:a.medicalCategory,webFormSubCategory:"0-8",content:'<p>Please select a location to move "'+t.name+'"<br/>to '+t.primaryRecipient.name+'\'s Employee Record</p>\n\t\t\t\t\t\t<super-select-list model="webFormSubCategory">\n\t\t\t\t\t\t\t<li><h4>Personnel Documents</h4></li>\n\t\t\t\t\t\t\t<super-select-list-item ng-repeat="item in personnel.enums" value="\'0-\' + item.value" label="item.name"></super-select-list-item>\n\t\t\t\t\t\t\t<li><hr class="divider"/></li>\n\t\t\t\t\t\t\t<li><h4>Medical Documents</h4></li>\n\t\t\t\t\t\t\t<super-select-list-item ng-repeat="item in medical.enums" value="\'1-\' + item.value" label="item.name"></super-select-list-item>\n\t\t\t\t\t\t</super-select-list>',primaryText:"Continue",secondaryText:"Cancel"};f.showStandard(r).then(function(r){var n=r.webFormSubCategory.split("-")[0],o=r.webFormSubCategory.split("-")[1];i(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.addFileToRecord({employeeId:t._employee.employeeId,formInstanceId:t.id,name:t.name,category:n,subCategory:o});case 3:e.statusUpdated(),p.success(t.name+" has been added to "+t._employee.name+"'s employee record","Form added to Employee Record ",!1),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),p.error(t.name+" was not added to "+t._employee.name+"'s employee record successfully","Add to Employee Record ",!1);case 10:case"end":return r.stop()}},r,this,[[0,7]])}))()})},updateWorkflowStep:function(t){var r={id:t.id,targetStep:t.prevStep._formTemplateStepId,params:{targetStatus:0}};c.updateCurrentStepId(r).then(function(r){if(null!=r){var n=t.prevStep._stepParticipant.name?"to "+t.prevStep._stepParticipant.name:"";p.success("Workflow step re-sent "+n,"Success!",!1),e.statusUpdated()}}).catch(function(e){p.error("There was an error resending the workflow step. Please try again.","Error")})},sendReminder:i(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{c.postReminder({id:r.id}).then(function(t){var n=r.currentStepParticipantName?"to "+r.currentStepParticipantName:"";null!=t&&(p.success(""+n,"Reminder Sent",!1),e.statusUpdated())})}catch(e){p.error("There was an error sending a reminder to "+participant,"Error")}case 1:case"end":return t.stop()}},t,this)}))}}]}]),t}(c.Component);angular.module("ec-forms-tracking-components").directive("cmpTrackedForm",function(){return new u(l,"tracked-form")})},{"base-component":4}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});r.Component=function e(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.restrict="E",this.replace=!0,this.scope=t,this.templateUrl="components/cmp-"+r+"/"+r+".html",Object.assign(this,o)}},{}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});r.Segment=function e(t){n(this,e),this.restrict="E",this.scope=!0,this.replace=!0,this.templateUrl=function(e,r){return"routes"+r.folder+"/segment-"+t+"/"+t+".html"}}},{}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});r.State=function e(t,r){n(this,e),Object.assign(this,t),this.resolve=this.resolve||{},this.resolve.routeVm=function(){return r},this.controller=function(e,t,r){e.routeVm=r},this.controller.$inject=["$scope","$window","routeVm"]}},{}],7:[function(e,t,r){"use strict";function n(e){e.load("employee-center")}n.$inject=["ssAppConfigSvc"],angular.module("ec-forms-tracking").run(n)},{}],8:[function(e,t,r){"use strict";function n(e){e.html5Mode(!0)}n.$inject=["$locationProvider"],angular.module("ec-forms-tracking").config(n)},{}],9:[function(e,t,r){"use strict";e("./components/cmp-tracked-form-group/tracked-form-group.js"),e("./components/cmp-tracked-form/tracked-form.js"),e("./routes/index/index.state.js"),e("./routes/index/segment-content/content.js"),e("./routes/index/segment-content/content.logic.js"),e("./routes/index/segment-header/header.js"),e("./routes/index/segment-header/header.logic.js"),e("./config/load-config.js"),e("./config/router.js")},{"./components/cmp-tracked-form-group/tracked-form-group.js":2,"./components/cmp-tracked-form/tracked-form.js":3,"./config/load-config.js":7,"./config/router.js":8,"./routes/index/index.state.js":12,"./routes/index/segment-content/content.js":13,"./routes/index/segment-content/content.logic.js":14,"./routes/index/segment-header/header.js":15,"./routes/index/segment-header/header.logic.js":16}],10:[function(e,t,r){"use strict";angular.module("ec-forms-tracking",["super-suit","ec-forms-tracking-segments","ec-forms-tracking-segment-logic","ec-forms-tracking-templates","ec-forms-tracking-helpers","ec-forms-tracking-components","ec-forms-tracking-decorators","ec-forms-tracking-filters","ec-forms-tracking-services"]),angular.module("ec-forms-tracking-segments",[]),angular.module("ec-forms-tracking-segment-logic",[]),angular.module("ec-forms-tracking-helpers",[]),angular.module("ec-forms-tracking-components",[]),angular.module("ec-forms-tracking-decorators",[]),angular.module("ec-forms-tracking-filters",[]),angular.module("ec-forms-tracking-services",[])},{}],11:[function(e,t,r){"use strict";!function(e){try{e=angular.module("ec-forms-tracking-templates")}catch(t){e=angular.module("ec-forms-tracking-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/index.html",'<route folder="/index"> <div class="route-wrapper"> <segment name="header"></segment> <segment name="content"></segment> </div> </route> ')}])}(),function(e){try{e=angular.module("ec-forms-tracking-templates")}catch(t){e=angular.module("ec-forms-tracking-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-tracked-form/tracked-form.html",'<div class="cmp-tracked-form" data-auto-due-date="{{ form._dueDateUtc }}" data-auto-create-date="{{ form._createdUtc }}"> <div class="form-list-item-wrapper" ng-class="{\'rejected\': form.isRejected, \'{{form.dueDateStatus.class}}\' : form.dueDateStatus && !form.isComplete && !form.isRejected}"> <div class="form-item-details"> <div class="form-recipient-group"> <h4 ng-if="!vm.showContactToggle && form._employee.meta.permissions.permittedActions.view"><a href="/ec-employee/record/{{form.primaryRecipient.employeeId}}/personal" ng-bind="form.primaryRecipient.name || \'N/A\'"></a></h4> <h4 ng-if="!vm.showContactToggle && !form._employee.meta.permissions.permittedActions.view" ng-bind="form.primaryRecipient.name || \'N/A\'"></h4> <div class="contact-toggle-group" ng-if="vm.showContactToggle"> <h4 ss-menu="contact-details"><a class="toggle-ctrl" ng-click="go.toggleContact()" ng-bind="form.primaryRecipient.name || \'N/A\'"></a></h4> <div class="select-menu contact-details" ss-pending="vm.loadingContact"> <h4 data-auto="contact-name"><strong ng-bind="\'Contact \' + form.primaryRecipient.name"></strong></h4> <p data-auto="contact-phone" ng-if="form._employee.meta.permissions.permittedActualProperties.phoneNumbers" ss-icon="phone" ng-bind="vm.empPhone"></p> <p data-auto="contact-email" ng-if="form._employee.meta.permissions.permittedActualProperties.emails" ss-icon="envelope" ng-bind="vm.empEmail"></p> <a ng-if="form._employee.meta.permissions.permittedActions.view" href="/ec-employee/record/{{form.primaryRecipient.employeeId}}/personal">View Employee Profile</a> </div> </div> </div> <div class="form-name-group"> <h4 class="form-name" ss-icon-before="li-form-e-large" ng-if="!form.isPacket && form._isEmployeeInitiated === true"> <a href="#" ng-bind="form.name" ng-click="go.viewForm(form)"></a> </h4> <h4 class="form-name" ss-icon-before="li-form-large" ng-if="!form.isPacket && form._isEmployeeInitiated === false"> <a href="#" ng-bind="form.name" ng-click="go.viewForm(form)"></a> </h4> <h4 class="form-name" ng-if="form.isPacket" ss-icon-before="li-packet-large"><a ng-click="vm.openDetails = !vm.openDetails" ng-bind="form.name"></a></h4> <button ng-if="form.isPacket" smp class="details-toggle" ss-icon-after="{{vm.openDetails === false ? \'angle-down\': \'angle-up\'}}" ng-click="vm.openDetails = !vm.openDetails">{{vm.openDetails === false ? \'Show\' : \'Hide\'}} Details</button> </div> <div class="form-due-group" data-auto-due-date="{{form._dueDateUtc}}"> <ul> <li class="form-meta-item" ng-if="form._dueDateUtc && !form.isComplete"> <strong class="form-due-date" ng-bind="form.dueDateStatus.statusFriendly" ng-class="{\'{{form.dueDateStatus.class}}\': form.dueDateStatus}"></strong> </li> <li class="form-meta-item form-sent-date">Sent {{form.sentDate}}</li> </ul> </div> <div class="form-step-status-group"> <div ng-if="!form.isPacket && !form.isComplete"> <ul class="step-status-chart total-steps-{{form.totalSteps}}"> <li ng-repeat="step in form._steps | limitTo: form.totalSteps" ng-class="{\'{{step.stepStatus}}\' : step.stepStatus}"></li> </ul> <super-popover> <h6>Workflow Steps</h6> <ul class="popover-step-list"> <li class="workflow-step-item" ng-repeat="step in form._steps | limitTo: form.totalSteps"> <span ng-bind="{{$index + 1}}"></span>) <span class="ss-pipe-right" ng-bind="step._stepParticipant.name"></span><span ng-bind="step._stepAction | enumByValue:\'stepAction\'"></span> </li> </ul> </super-popover> </div> <p ng-if="!form.isPacket && form.isComplete" class="form-complete" ss-icon="check">complete</p> <p ng-if="form.isPacket" ng-bind="form.packetCount" ng-class="{\'form-complete\' : form.isComplete}" ss-icon="{{form.isComplete ? \'check\' : \'\'}}"></p> </div> <div class="form-step-action-group"> <p ng-if="!form.isComplete" ng-bind="form.currentStepMeta" ng-class="{\'denied\':form.isRejected}" ss-icon="{{form.isRejected ? \'thumbsdown-stripes\' : \'\' }}"></p> <p ng-if="form._lastReminderSentUtc != null && !form.isComplete && !form.isPacket"> <em>Reminder sent {{form.reminderSentDate}}</em> </p> </div> <div class="file-attachments"> <super-popover ng-if="form.filesOnInstance.length" link="{{ form.filesOnInstance.length }}" ss-icon="paperclip"> <h6>UPLOADED FILES</h6> <ul class="popover-step-list" ng-repeat="file in form.filesOnInstance"> <li ss-icon-before="{{ file.icon }}" ng-bind="file.filename"></li> </ul> <h6>These files were uploaded by a user as part of a workflow step.</h6> </super-popover> </div> <div class="form-actions-group" ng-if="!form.isPacket"> <super-button ng-if="!form.isComplete" ss-icon-after="angle-down"> <item class="no-select" ng-if="!form.isUser && !form.isRejected"><h6><em>Send Reminder to</em></h6></item> <item class="divided-bottom" ng-if="!form.isUser && !form.isRejected" ng-click="go.sendReminder(form)">{{form.currentStepParticipantName}}</item> <item ng-if="form.isRejected" class="no-select"><h6><em>Resend workflow step to</em></h6></item> <item ng-if="form.isRejected" class="divided-bottom"><span ng-click="go.updateWorkflowStep(form)">Step {{form.prevStepNum}}- {{form.prevStep._stepParticipant.name}}</span></item> <item ss-permitted="formInstances.delete" ng-click="go.remove(form)">Delete Form</item> <item ng-if="form.filesOnInstance.length" class="divided-top no-select"><h6><em>Uploaded files</em></h6></item> <item ng-if="form.filesOnInstance.length" ng-click="go.download(form.filesOnInstance)">Download ({{ form.filesOnInstance.length }}) <ng-pluralize count="form.filesOnInstance.length" when="{\'1\': \'file\', \'other\': \'files\'}"></ng-pluralize> </item> </super-button> <super-button ng-if="form.isComplete && (form._employee.meta.permissions.permittedActions.createEmployeeFile || $root.isPermitted.formInstances.archive)" ss-icon-after="angle-down"> <item ng-if="form._employee.meta.permissions.permittedActions.createEmployeeFile" ng-click="form._sentToEmployeeRecord || go.updateEmpRecord(form)" ng-disabled="form._sentToEmployeeRecord">Move to Employee Record</item> <item ss-permitted="formInstances.archive" ng-click="go.updateFormStatus(form, \'archived\')">Archive Form</item> <item ng-if="form.filesOnInstance.length" class="divided-top no-select"><h6><em>Uploaded files</em></h6></item> <item ng-if="form.filesOnInstance.length" ng-click="go.download(form.filesOnInstance)">Download ({{ form.filesOnInstance.length }}) <ng-pluralize count="form.filesOnInstance.length" when="{\'1\': \'file\', \'other\': \'files\'}"></ng-pluralize> </item> </super-button> </div> </div> </div> <div class="form-packet-details" ng-if="form.isPacket" ng-show="vm.openDetails"> <ul class="form-packet-list"> <li ng-show="!routeVm.loading && form.content.length > 0" ng-repeat="Pform in form.content | orderBy: \'_packetInstance.sortOrder\'" class="form-packet-list-item"> <div class="form-list-item-wrapper" ng-class="{\'rejected\': Pform.isRejected, \'{{Pform.dueDateStatus.class}}\' : Pform.dueDateStatus && !Pform.isComplete && !Pform.isRejected}"> <div class="form-item-details" data-auto-create-date="{{Pform._createdUtc}}" data-auto-due-date="{{Pform._dueDateUtc}}"> <div class="form-name-group"> <h4 class="form-name" ss-icon-before="li-form-large"> <a href="#" ng-bind="Pform.name" ng-click="go.viewForm(Pform)"></a> </h4> </div> <div class="form-due-group"> <ul> <li class="form-meta-item" ng-if="Pform._dueDateUtc && !Pform.isComplete"> <strong class="form-due-date" ng-class="{\'{{Pform.dueDateStatus.class}}\': Pform.dueDateStatus}" ng-bind="Pform.dueDateStatus.statusFriendly"></strong> </li> <li class="form-meta-item form-sent-date">Sent {{Pform.sentDate}}</li> </ul> </div> <div class="form-step-status-group"> <div ng-if="!Pform.isComplete"> <ul class="step-status-chart total-steps-{{Pform.totalSteps}}"> <li ng-repeat="step in Pform._steps | limitTo: Pform.totalSteps" ng-class="{\'{{step.stepStatus}}\' : step.stepStatus}"></li> </ul> <super-popover> <h6>Workflow Steps</h6> <ul class="popover-step-list"> <li class="workflow-step-item" ng-repeat="step in Pform._steps | limitTo: Pform.totalSteps"> <span ng-bind="{{$index + 1}}"></span>) <span class="ss-pipe-right" ng-bind="step._stepParticipant.name"></span><span ng-bind="step._stepAction | enumByValue:\'stepAction\'"></span> </li> </ul> </super-popover> </div> <p class="form-complete" ng-if="Pform.isComplete" ss-icon="check">complete</p> </div> <div class="form-step-action-group"> <p ng-if="!Pform.isComplete" ng-bind="Pform.currentStepMeta" ng-class="{\'denied\':Pform.isRejected}" ss-icon="{{Pform.isRejected ? \'thumbsdown-stripes\' : \'\' }}"></p> <p ng-if="Pform._lastReminderSentUtc != null && !Pform.isComplete"> <em>Reminder sent {{Pform.reminderSentDate}}</em> </p> </div> <div class="file-attachments"> <super-popover ng-if="Pform.filesOnInstance.length" link="{{ Pform.filesOnInstance.length }}" ss-icon="paperclip"> <h6>UPLOADED FILES</h6> <ul class="popover-step-list" ng-repeat="file in Pform.filesOnInstance"> <li ss-icon-before="{{ file.icon }}" ng-bind="file.filename"></li> </ul> <h6>These files were uploaded by a user as part of a workflow step.</h6> </super-popover> </div> <div class="form-actions-group"> <super-button ng-if="!Pform.isComplete" ss-icon-after="angle-down"> <item class="no-select" ng-if="!Pform.isUser && !Pform.isRejected"><h6><em>Send Reminder to</em></h6></item> <item class="divided-bottom" ng-if="!Pform.isUser && !Pform.isRejected" ng-click="go.sendReminder(Pform)">{{Pform.currentStepParticipantName}}</item> <item ng-if="Pform.isRejected" class="no-select"><h6><em>Resend workflow step to</em></h6></item> <item ng-if="Pform.isRejected" class="divided"><span ng-click="go.updateWorkflowStep(Pform)">Step {{Pform.prevStepNum}}- {{Pform.prevStep._stepParticipant.name}}</span></item> <item ng-if="Pform.$permitted.actions.delete" ng-click="go.remove(Pform)">Delete Form</item> <item ng-if="Pform.filesOnInstance.length" class="divided-top no-select"><h6><em>Uploaded files</em></h6></item> <item ng-if="Pform.filesOnInstance.length" ng-click="go.download(Pform.filesOnInstance)">Download ({{ Pform.filesOnInstance.length }}) <ng-pluralize count="Pform.filesOnInstance.length" when="{\'1\': \'file\', \'other\': \'files\'}"></ng-pluralize> </item> </super-button> <super-button ng-if="Pform.isComplete && (Pform._employee.meta.permissions.permittedActions.createEmployeeFile || $root.isPermitted.formInstances.archive)" ss-icon-after="angle-down"> <item ng-if="Pform._employee.meta.permissions.permittedActions.createEmployeeFile" ng-click="Pform._sentToEmployeeRecord || go.updateEmpRecord(Pform)" ng-disabled="Pform._sentToEmployeeRecord">Move to Employee Record</item> <item ss-permitted="formInstances.archive" ng-click="go.updateFormStatus(Pform, \'archived\')">Archive Form</item> <item ng-if="Pform.filesOnInstance.length" class="divided-top no-select"><h6><em>Uploaded files</em></h6></item> <item ng-if="Pform.filesOnInstance.length" ng-click="go.download(Pform.filesOnInstance)">Download ({{ Pform.filesOnInstance.length }}) <ng-pluralize count="Pform.filesOnInstance.length" when="{\'1\': \'file\', \'other\': \'files\'}"></ng-pluralize> </item> </super-button> </div> </div> </div> </li> </ul> </div> </div> ')}])}(),function(e){try{e=angular.module("ec-forms-tracking-templates")}catch(t){e=angular.module("ec-forms-tracking-templates",[])}e.run(["$templateCache",function(e){
e.put("components/cmp-tracked-form-group/tracked-form-group.html",'<div class="cmp-tracked-form-group form-list-group {{type}}"> <div ss-pending="vm.loading && !vm.scrolling" ss-pending-status="\'Loading Form Instances...\'"> <ul class="ss-form-panel-list"> <li class="ss-panel-list-item" ng-if="vm.formsAndPackets.length" ng-repeat="form in vm.formsAndPackets track by $index"> <cmp-tracked-form form="form" type="type" status-updated="go.refreshData()"></cmp-tracked-form> </li> <li class="ss-panel-list-item" ng-if="!vm.loading && !vm.formsAndPackets.length"> <div class="form-list-item-wrapper">No Forms or Packets found</div> </li> </ul> </div> <div class="scroller" ng-if="vm.showInfScroll" ss-pending="vm.scrolling" ss-pending-status="\'Loading more results...\'" infinite-scroll="scrollData()" infinite-scroll-distance="1"></div> </div> ')}])}(),function(e){try{e=angular.module("ec-forms-tracking-templates")}catch(t){e=angular.module("ec-forms-tracking-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/segment-header/header.html",'<header class="segment-index-header"> <h1>Track Forms</h1> <div class="gd-row form-list-filters"> <div class="gd-40p"> <div class="form-search-filter"> <label for="search-filter">Filter by Form, Packet or Employee</label> <super-input-text id="search-filter" debounce="750" ss-icon="search" model="routeVm.search" is-disabled="vm.disableFilters">Type here to filter</super-input-text> </div> </div> <div class="gd-20p"> <super-select-list label="Date Sent" label-weight="heavy" model="vm.dateSentIdx" is-disabled="vm.disableFilters"> <super-select-list-item ng-repeat="dateSent in vm.dateSentOptions" label="dateSent.title" value="$index"></super-select-list-item> </super-select-list> </div> <div class="gd-20p"> <super-select-list label="Results (Sender/Admin)" label-weight="heavy" model="routeVm.sentByParticipant" is-disabled="vm.disableFilters"> <super-select-list-item ng-repeat="sent in vm.sentByCriteria" value="sent.value" label="sent.name"></super-select-list-item> </super-select-list> </div> <div class="gd-20p"> <super-select-list label="Employee location" label-weight="heavy" model="routeVm.sentToLocation" is-disabled="vm.disableFilters"> <super-select-list-item ng-repeat="loc in vm.locations" value="loc.id" label="loc._name"></super-select-list-item> </super-select-list> </div> </div> <div class="forms-list-filter-header"> <ul class="forms-list-filter-tabs"> <li ss-icon-before="calendar-o" ng-class="{\'is-selected\': routeVm.selectedCategory === \'urgent\'}" ng-click="go.filter(\'urgent\')">Urgent <abbr title="urgent forms count" class="count-display" ng-bind="routeVm.counts._urgent || \'0\'"></abbr></li> <li ss-icon-before="thumbsdown-stripes" ng-class="{\'is-selected\': routeVm.selectedCategory === \'denied\'}" ng-click="go.filter(\'denied\')">Denied <abbr title="denied forms count" class="count-display" ng-bind="routeVm.counts._denied || \'0\'"></abbr></li> <li ss-icon-before="square-o" ng-class="{\'is-selected\': routeVm.selectedCategory === \'not-started\'}" ng-click="go.filter(\'not-started\')">Not Started <abbr title="not started forms count" class="count-display" ng-bind="routeVm.counts._notStarted || \'0\'"></abbr></li> <li ss-icon-before="pencil" ng-class="{\'is-selected\': routeVm.selectedCategory === \'in-progress\'}" ng-click="go.filter(\'in-progress\')">In-Progress <abbr title="in progress forms count" class="count-display" ng-bind="routeVm.counts._inProgress || \'0\'"></abbr></li> <li ss-icon-before="check" ng-class="{\'is-selected\': routeVm.selectedCategory === \'complete\'}" ng-click="go.filter(\'complete\')">Complete <abbr title="complete forms count" class="count-display" ng-bind="routeVm.counts._complete || \'0\'"></abbr></li> </ul> </div> <div class="sort-by-filter"> <super-select-list type="filter" label="Sort by" model="routeVm.sortBy" is-disabled="vm.disableFilters"> <super-select-list-item ng-repeat="sort in vm.sortOptions" ng-if="sort.categories.includes(routeVm.selectedCategory)" value="sort.value" label="sort.name"></super-select-list-item> </super-select-list> </div> </header> ')}])}(),function(e){try{e=angular.module("ec-forms-tracking-templates")}catch(t){e=angular.module("ec-forms-tracking-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/segment-content/content.html",'<div class="segment-index-content"> <cmp-tracked-form-group type="urgent" search="routeVm.search" endpoint="go.urgent()" sent-by-sort="routeVm.sentByParticipant" sort-by="routeVm.sortBy" category="routeVm.selectedCategory" location="routeVm.sentToLocation" count="routeVm.counts._urgent" empl-id="vm.emplId" ng-if="routeVm.selectedCategory === \'urgent\'"></cmp-tracked-form-group> <cmp-tracked-form-group type="denied" search="routeVm.search" endpoint="go.denied()" sent-by-sort="routeVm.sentByParticipant" sort-by="routeVm.sortBy" category="routeVm.selectedCategory" location="routeVm.sentToLocation" count="routeVm.counts._denied" empl-id="vm.emplId" ng-if="routeVm.selectedCategory === \'denied\'"></cmp-tracked-form-group> <cmp-tracked-form-group type="not-started" search="routeVm.search" endpoint="go.notStarted()" sent-by-sort="routeVm.sentByParticipant" sort-by="routeVm.sortBy" category="routeVm.selectedCategory" location="routeVm.sentToLocation" count="routeVm.counts._notStarted" empl-id="vm.emplId" ng-if="routeVm.selectedCategory === \'not-started\'"></cmp-tracked-form-group> <cmp-tracked-form-group type="in-progress" search="routeVm.search" endpoint="go.inProgress()" sent-by-sort="routeVm.sentByParticipant" sort-by="routeVm.sortBy" category="routeVm.selectedCategory" location="routeVm.sentToLocation" count="routeVm.counts._inProgress" empl-id="vm.emplId" ng-if="routeVm.selectedCategory === \'in-progress\'"></cmp-tracked-form-group> <cmp-tracked-form-group type="complete" search="routeVm.search" endpoint="go.complete()" sent-by-sort="routeVm.sentByParticipant" sort-by="routeVm.sortBy" category="routeVm.selectedCategory" location="routeVm.sentToLocation" count="routeVm.counts._complete" empl-id="vm.emplId" , ng-if="routeVm.selectedCategory === \'complete\'"></cmp-tracked-form-group> </div> ')}])}()},{}],12:[function(e,t,r){"use strict";var n=e("base-state"),o={},s={url:"/",templateUrl:"routes/index/index.html",resolve:{form:function(){},org:["ssAsync","ssOrganizationSvc","ssToastHlp",function(e,t,r){return e(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getActiveOrg();case 3:o.org=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r.error("There was an error retrieving organization data. Due Dates may not display. Please see the console for more detail.","",!1);case 9:case"end":return e.stop()}},e,this,[[0,6]])}))()}],$title:function(){return"Frontline Central - Track Forms"}},$permissions:function(e){return e.isPermittedAction("formInstances","track")}};angular.module("ec-forms-tracking").config(["$stateProvider",function(e){e.state("base.index",new n.State(s,o))}])},{"base-state":6}],13:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("base-segment"),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"controller",value:["$injector","$scope","$filter","$location","ssAsync","ssEnum","moment","ssFormInstancesApi","ssActiveUserSvc","ssDateByOrgHlp",function(e,t,r,n,o,s,i,a,c,l){var m=t.routeVm;m.getFormsPromise=null,m.getFormCountsPromise=null;var u=(e.get("segmentIndexContentLogic"),t.vm={}),p=n.search().resolvemethod;"ReadModel"!==p&&"Mongo"!==p||(u.resolveMethod=p);t.go={urgent:function(){return{api:a.queryByOrg,config:{include:"steps","filter[dueDateUtc]":l.safeNowRelativeTo(m.org).add(4,"days").toISOString(),"filter[status]":s.formStatus.incomplete+","+s.formStatus.rejected,from:m.dateSent.from.toISOString(),to:m.dateSent.to.toISOString(),limit:50,resolvemethod:u.resolveMethod}}},denied:function(){return{api:a.queryByOrg,config:{include:"steps","filter[status]":s.formStatus.rejected,from:m.dateSent.from.toISOString(),to:m.dateSent.to.toISOString(),limit:50,resolvemethod:u.resolveMethod}}},notStarted:function(){return{api:a.queryNotStarted,config:{include:"steps",from:m.dateSent.from.toISOString(),to:m.dateSent.to.toISOString(),limit:50,resolvemethod:u.resolveMethod}}},inProgress:function(){return{api:a.queryInProgress,config:{include:"steps",from:m.dateSent.from.toISOString(),to:m.dateSent.to.toISOString(),limit:50,resolvemethod:u.resolveMethod}}},complete:function(){return{api:a.queryByOrg,config:{include:"steps","filter[status]":s.formStatus.complete,from:m.dateSent.from.toISOString(),to:m.dateSent.to.toISOString(),limit:50,resolvemethod:u.resolveMethod}}}};o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getIdentityByTypeSync("employee");case 3:u.emplId=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}},e,this,[[0,6]])}))()}]}]),t}(a.Segment);angular.module("ec-forms-tracking-segments").directive("segmentIndexContent",function(){return new c("content")})},{"base-segment":5}],14:[function(e,t,r){"use strict";function n(){return{}}angular.module("ec-forms-tracking-segment-logic").factory("segmentIndexContentLogic",n)},{}],15:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("base-segment"),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"controller",value:["$injector","$scope","ssAsync","ssActiveUserSvc","ssLocationSvc","ssToastHlp","ssFormInstancesApi",function(e,t,r,n,o,s,i){function a(){var e=moment();return[l.lastXDays(e,7),l.lastXDays(e,14),l.lastXDays(e,60),l.yearToDate(e),l.previousSchoolYear(e),l.currentSchoolYear(e)]}var c=t.routeVm,l=e.get("segmentIndexHeaderLogic");c.selectedCategory="urgent",c.sentByParticipant="0",c.sentToLocation="-1",c.sortBy="duedate",c.counts=[],c.dateSent=a()[1];var m=t.vm={sentByCriteria:[{value:"0",name:"All"},{value:"creatorId",name:"Form Sender - Myself"},{value:"formadministrator",name:"Form Admin - Myself"}],sortOptions:[{id:0,value:"duedate",name:"Due Date",categories:["urgent","denied","not-started","in-progress","complete"]},{id:1,value:"primaryrecipient",name:"Employee Name (A-Z)",categories:["urgent","denied","not-started","in-progress","complete"]},{id:2,value:"formname",name:"Form/Packet Name (A-Z)",categories:["urgent","denied","not-started","in-progress","complete"]},{id:3,value:"recentlysent",name:"Recently Sent",categories:["urgent","denied","not-started","in-progress"]},{id:4,value:"completionpercent",name:"Workflow Progress",categories:["urgent","denied","in-progress"]}],locations:[],dateSentOptions:a(),dateSentIdx:1};t.go={filter:function(e){c.selectedCategory=e}};m.locations=o.getAll(),m.locations.splice(0,0,{_name:"Anywhere",id:"-1"}),t.$watch("routeVm.selectedCategory",function(e,t){if(e!==t){var r=m.sortOptions.findIndex(function(e){return e.value===c.sortBy});m.sortOptions[r].categories.includes(c.selectedCategory)||(c.sortBy="duedate")}}),t.$watchGroup(["routeVm.getFormsPromise","routeVm.getFormCountsPromise"],function(e,t){var r=e;m.disableFilters=r.some(function(e){return null!=e})}),t.$watch("vm.dateSentIdx",function(e,t){e!==t&&(c.dateSent=m.dateSentOptions[e])})}]}]),t}(a.Segment);angular.module("ec-forms-tracking-segments").directive("segmentIndexHeader",function(){return new c("header")})},{"base-segment":5}],16:[function(e,t,r){"use strict";function n(){return{lastXDays:function(e,t){return{from:e.clone().subtract(t,"days"),to:e.clone(),title:"Last "+t+" Days"}},currentSchoolYear:function(e){var t,r;if(e.clone().month()>6){var n=e.clone().utc().add(1,"years");t=e.clone().year()+"-08-01T00:00:00.000Z",r=n.format("YYYY")+"-07-31T23:59:59.999Z"}else{t=e.clone().utc().subtract(1,"years").format("YYYY")+"-08-01T00:00:00.000Z",r=e.clone().year()+"-07-31T23:59:59.999Z"}return{from:moment(t,moment.ISO_8601).utc(),to:moment(r,moment.ISO_8601).utc(),title:moment(t,moment.ISO_8601).utc().format("MMM YYYY")+" – "+moment(r,moment.ISO_8601).utc().format("MMM YYYY")}},previousSchoolYear:function(e){var t=this.currentSchoolYear(e),r=t.from.subtract(1,"years"),n=t.to.subtract(1,"years");return{from:r,to:n,title:r.format("MMM YYYY")+" – "+n.format("MMM YYYY")}},yearToDate:function(e){return{from:e.clone().startOf("year"),to:e.clone(),title:"Jan 1 - Today"}}}}angular.module("ec-forms-tracking-segment-logic").factory("segmentIndexHeaderLogic",n)},{}]},{},[1]);