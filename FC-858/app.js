!function(){function e(t,n,o){function i(a,l){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}return e}()({1:[function(e,t,n){"use strict";e("./partials.compiled"),e("./module"),e("./includes");var o=(0,eval)("this");o.registerUiModule&&o.registerUiModule("ec-printviewbuilder")},{"./includes":17,"./module":18,"./partials.compiled":19}],2:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={box:"="},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope",function(e){e.vm={shapes:[{shape:"square",icon:"check-square"},{shape:"round",icon:"check-circle"},{shape:"circle",icon:"check-circle-o"}]},e.go={}}]}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpBoxCheckboxOptions",function(){return new c(s,"box-checkbox-options")})},{"base-component":11}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={startingPoint:"=",boxCreated:"&"},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope",function(e){e.vm={},e.go={}}]},{key:"link",value:function(e,t,n){function o(e){var n=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,i={x:e.pageX-a.left-n,y:e.pageY-a.top-o};l=i.y<r.y?i.y:r.y,s=i.x<r.x?i.x:r.x,c=Math.abs(i.y-r.y),u=Math.abs(i.x-r.x),t.css({top:l+"px",left:s+"px",height:c+"px",width:u+"px"})}function i(){if(p.off("mouseup",i),p.off("mousemove",o),!(c<5||u<5)){var t=d.offsetHeight-(l+c),n=d.offsetWidth-(s+u);e.boxCreated({$box:{top:l/d.offsetHeight*100,right:n/d.offsetWidth*100,bottom:t/d.offsetHeight*100,left:s/d.offsetWidth*100}})}}var r,a,l,s,c,u,p=t.parent(),d=p[0];e.$watch("startingPoint",function(e){null!=e&&(r=e,a=d.getBoundingClientRect(),c=u=0,t.css({top:e.y+"px",left:e.x+"px",height:c+"px",width:u+"px"}),p.on("mousemove",o),p.on("mouseup",i))})}}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpBoxCreator",function(){return new c(s,"box-creator")})},{"base-component":11}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={box:"="},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope","moment",function(e,t){function n(e){var t=function(t){return t.cSharpFormat===e},n=r.dateOptions.reduce(function(e,t){return e.concat(t.options)},[]),o=n.find(t),i=r.dateOptions.find(function(e){return e.options.filter(t).length>0});i.selected=!0,i.selectedVal=o.jsFormat}function o(){var n=[];r.dateOptions.forEach(function(e){if(e.selected&&e.selectedVal.length){var t=e.options.find(function(t){return t.jsFormat===e.selectedVal});t&&n.push(t)}});var o=!!n.find(function(e){return"Month"===e.name}),i=o?" ":"/",a=n.map(function(e){return e.jsFormat}),l=a.join(i);n.length?(r.displayString=t().format(l),e.box.stringFormat=n.map(function(e){return e.cSharpFormat}).join(i)):(r.displayString="",e.box.stringFormat="")}var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r=e.vm={displayString:"",dateOptions:[{name:"Month",guid:"Month-"+i,selected:!1,selectedVal:"",options:[{name:"MM",cSharpFormat:"MM",jsFormat:"MM"},{name:"Month",cSharpFormat:"MMMM",jsFormat:"MMMM"}]},{name:"Date",guid:"Date-"+i,selected:!1,selectedVal:"",options:[{name:"DD",cSharpFormat:"dd",jsFormat:"DD"}]},{name:"Year",guid:"Year-"+i,selected:!1,selectedVal:"",options:[{name:"YYYY",cSharpFormat:"yyyy",jsFormat:"YYYY"},{name:"YY",cSharpFormat:"yy",jsFormat:"YY"}]}]};if(e.box.stringFormat){var a=e.box.stringFormat,l=a.startsWith("MMMM")?" ":"/";a.split(l).forEach(function(e){return n(e)}),o()}e.go={update:o}}]}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpBoxDateOptions",function(){return new c(s,"box-date-options")})},{"base-component":11}],5:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={box:"=",text:"=",onDelete:"&",isActive:"&"},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope","rAF","viewportOffsetHlp",function(e,t,n){e.rAF=t,e.viewportOffsetHlp=n;e.vm={optionsTemplate:"<cmp-box-"+e.box.type+'-options box="box"></cmp-box-'+e.box.type+"-options>"},e.go={}}]},{key:"link",value:function(e,t,n){function o(t){if(t.stopPropagation(),e.isActive()){a=p.getBoundingClientRect(),l=c.getBoundingClientRect();var n=e.viewportOffsetHlp.getViewportOffsets(window);d.x=t.pageX-l.left-n.left,d.y=t.pageY-l.top-n.top;var o=Object.keys(f);o.forEach(function(e){return f[e]=!1}),d.x<=6&&(f.left=!0),c.offsetWidth-d.x<=6&&(f.right=!0),d.y<=6&&(f.top=!0),c.offsetHeight-d.y<=6&&(f.bottom=!0);o.reduce(function(e,t){return e||f[t]},!1)||o.forEach(function(e){return f[e]=!0}),u.on("mousemove",r)}}function i(t){e.isDrawing=!1,e.$root.safeApply(),u.off("mousemove",r)}function r(t){var n=e.viewportOffsetHlp.getViewportOffsets(window),o={x:t.pageX-a.left-n.left,y:t.pageY-a.top-n.top};if(f.top){var i=(o.y-d.y)/a.height*100;s.top=i<=0?0:i,c.style.top=s.top+"%"}if(f.left){var r=(o.x-d.x)/a.width*100;s.left=r<=0?0:r,c.style.left=s.left+"%"}if(f.bottom){var u=o.y+(l.height-d.y),p=a.height-u,m=p/a.height*100;s.bottom=m<=0?0:m,c.style.bottom=s.bottom+"%"}if(f.right){var g=o.x+(l.width-d.x),v=a.width-g,b=v/a.width*100;s.right=b<=0?0:b,c.style.right=s.right+"%"}}var a,l,s=e.box,c=t[0],u=t.parent(),p=u[0],d={x:0,y:0},f={top:!1,right:!1,bottom:!1,left:!1};c.style.top=s.top+"%",c.style.right=s.right+"%",c.style.bottom=s.bottom+"%",c.style.left=s.left+"%",t.on("mousedown",o),t.on("mouseup",i),u.on("mouseup",i),e.$on("$destroy",function(){u.off("mouseup",i),u.off("mousemove",r)})}}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpBoxResizer",function(){return new c(s,"box-resizer")})},{"base-component":11}],6:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={box:"="},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope",function(e){e.vm={},e.go={}}]}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpBoxTextOptions",function(){return new c(s,"box-text-options")})},{"base-component":11}],7:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={step:"="},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope","ssEventSvc",function(e,t){e.vm={routeVm:e.$root.utils.findInParentScope("routeVm",e)},e.go={selectOption:function(e,n){t.emit("pvb.select-option",e,n)}}}]}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpStepCheckboxDisplay",function(){return new c(s,"step-checkbox-display")})},{"base-component":11}],8:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={step:"="},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope","ssEventSvc",function(e,t){e.vm={},e.go={selectOption:function(e){t.emit("pvb.select-option",e)}}}]}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpStepDateDisplay",function(){return new c(s,"step-date-display")})},{"base-component":11}],9:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={step:"="},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope","ssEventSvc",function(e,t){e.vm={groups:Array.from(new Set(e.step.fields.map(function(e){return e._fieldGroup||null}))),displayTextLimit:25},e.go={selectField:function(e){t.emit("pvb.select-field",e)},getFields:function(t){return t=t||null,e.step.fields.filter(function(e){return e._fieldGroup===t&&!e._fieldType.match(/heading/i)}).filter(function(e){return"text"!==e._fieldType||"text"===e._fieldType&&!0===e.config.mappable})},getGroupFriendlyTitle:function(t){return e.step.fields.find(function(e){return e._fieldGroup===t&&e._fieldType.match(/heading/i)}).uniqueLabel}}}]}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpStepTextDisplay",function(){return new c(s,"step-text-display")})},{"base-component":11}],10:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-component"),s={text:"@"},c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$scope",function(e){var t=e.vm={test:"testing..."};e.go={click:function(n){t.test=e.text}}}]}]),t}(l.Component);angular.module("ec-printviewbuilder-components").directive("cmpToolbox",function(){return new c(s,"toolbox")})},{"base-component":11}],11:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.Component=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this.restrict="E",this.replace=!0,this.scope=t,this.templateUrl="components/cmp-"+n+"/"+n+".html",Object.assign(this,i)}},{}],12:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.Segment=function e(t){o(this,e),this.restrict="E",this.scope=!0,this.replace=!0,this.templateUrl=function(e,n){return"routes"+n.folder+"/segment-"+t+"/"+t+".html"}}},{}],13:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.State=function e(t,n){o(this,e),Object.assign(this,t),this.resolve=this.resolve||{},this.resolve.routeVm=function(){return n},this.controller=function(e,t,n){e.routeVm=n},this.controller.$inject=["$scope","$window","routeVm"]}},{}],14:[function(e,t,n){"use strict";function o(e){e.load("employee-center")}o.$inject=["ssAppConfigSvc"],angular.module("ec-printviewbuilder").run(o)},{}],15:[function(e,t,n){"use strict";function o(e){e.html5Mode(!0)}o.$inject=["$locationProvider"],angular.module("ec-printviewbuilder").config(o)},{}],16:[function(e,t,n){"use strict";function o(){return i}var i={formatText:function(e){return e},getViewportOffsets:function(e){var t={left:-1,top:-1};if(null==e)return t;try{t.left=e.pageXOffset||e.document.documentElement.scrollLeft||e.document.body.scrollLeft||0}catch(e){t.left=0}try{t.top=e.pageYOffset||e.document.documentElement.scrollTop||e.document.body.scrollTop||0}catch(e){t.top=0}return t}};angular.module("ec-printviewbuilder-helpers").factory("viewportOffsetHlp",o)},{}],17:[function(e,t,n){"use strict";e("./components/cmp-box-checkbox-options/box-checkbox-options.js"),e("./components/cmp-box-creator/box-creator.js"),e("./components/cmp-box-date-options/box-date-options.js"),e("./components/cmp-box-resizer/box-resizer.js"),e("./components/cmp-box-text-options/box-text-options.js"),e("./components/cmp-step-checkbox-display/step-checkbox-display.js"),e("./components/cmp-step-date-display/step-date-display.js"),e("./components/cmp-step-text-display/step-text-display.js"),e("./components/cmp-toolbox/toolbox.js"),e("./helpers/viewportOffsetHlp/viewport-offset.js"),e("./routes/index/index.state.js"),e("./routes/index/segment-content/content.js"),e("./routes/index/segment-content/content.logic.js"),e("./routes/index/segment-data-panel/data-panel.js"),e("./routes/index/segment-data-panel/data-panel.logic.js"),e("./routes/index/segment-header/header.js"),e("./routes/index/segment-header/header.logic.js"),e("./routes/index/segment-print-builder/print-builder.js"),e("./routes/index/segment-print-builder/print-builder.logic.js"),e("./routes/index/segment-toolbox/toolbox.js"),e("./routes/index/segment-toolbox/toolbox.logic.js"),e("./config/load-config.js"),e("./config/router.js")},{"./components/cmp-box-checkbox-options/box-checkbox-options.js":2,"./components/cmp-box-creator/box-creator.js":3,"./components/cmp-box-date-options/box-date-options.js":4,"./components/cmp-box-resizer/box-resizer.js":5,"./components/cmp-box-text-options/box-text-options.js":6,"./components/cmp-step-checkbox-display/step-checkbox-display.js":7,"./components/cmp-step-date-display/step-date-display.js":8,"./components/cmp-step-text-display/step-text-display.js":9,"./components/cmp-toolbox/toolbox.js":10,"./config/load-config.js":14,"./config/router.js":15,"./helpers/viewportOffsetHlp/viewport-offset.js":16,"./routes/index/index.state.js":20,"./routes/index/segment-content/content.js":21,"./routes/index/segment-content/content.logic.js":22,"./routes/index/segment-data-panel/data-panel.js":23,"./routes/index/segment-data-panel/data-panel.logic.js":24,"./routes/index/segment-header/header.js":25,"./routes/index/segment-header/header.logic.js":26,"./routes/index/segment-print-builder/print-builder.js":27,"./routes/index/segment-print-builder/print-builder.logic.js":28,"./routes/index/segment-toolbox/toolbox.js":29,"./routes/index/segment-toolbox/toolbox.logic.js":30}],18:[function(e,t,n){"use strict";angular.module("ec-printviewbuilder",["super-suit","ec-printviewbuilder-segments","ec-printviewbuilder-segment-logic","ec-printviewbuilder-templates","ec-printviewbuilder-helpers","ec-printviewbuilder-components","ec-printviewbuilder-decorators","ec-printviewbuilder-services","ec-printviewbuilder-filters"]),angular.module("ec-printviewbuilder-segments",[]),angular.module("ec-printviewbuilder-segment-logic",[]),angular.module("ec-printviewbuilder-helpers",[]),angular.module("ec-printviewbuilder-components",[]),angular.module("ec-printviewbuilder-decorators",[]),angular.module("ec-printviewbuilder-services",[]),angular.module("ec-printviewbuilder-filters",[])},{}],19:[function(e,t,n){"use strict";!function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/index.html",'<route folder="/index"> <form id="form-controls" class="route-wrapper form-controls" ng-submit="routeVm.saveFormTemplate()" ss-validate-form> <segment name="header"></segment> <nav id="content-nav"> <super-tab-list class="flat"> <super-tab-list-item label="Form Builder" url="/ec-formbuilder/form/{{routeVm.formTemplate.id}}/builder" params=""></super-tab-list-item> <super-tab-list-item label="Form Settings" url="/ec-formbuilder/form/{{routeVm.formTemplate.id}}/settings" params=""></super-tab-list-item> <super-tab-list-item label="Overlay Builder" ng-if="routeVm.canViewOverlayBuilder" state="base.index" params="{formTemplateId: routeVm.formTemplate.id}"></super-tab-list-item> </super-tab-list> </nav> <section class="section-print-view-builder"> <segment name="toolbox"></segment> <segment name="print-builder"></segment> <segment name="data-panel"></segment> </section> </form> </route> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-box-checkbox-options/box-checkbox-options.html",'<div class="cmp-box-checkbox-options"> <ul class="shapes"> <li ng-repeat="s in vm.shapes" ng-click="box.shape = s.shape" ng-class="{selected: box.shape === s.shape}" ss-icon="{{s.icon}}"></li> </ul> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-box-creator/box-creator.html",'<div class="cmp-box-creator" ng-show="startingPoint.x && startingPoint.y" ng-style="vm.styles"></div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-box-date-options/box-date-options.html",'<div class="cmp-box-date-options"> <ul> <li ng-repeat="dateOption in vm.dateOptions"> <super-input-checkbox model="dateOption.selected" label="{{ dateOption.name }}" name="{{ dateOption.name }}" ng-click="go.update()"> </super-input-checkbox> <div> <super-input-radio ng-repeat="option in dateOption.options" is-disabled="!dateOption.selected" label="{{ option.name }}" model="dateOption.selectedVal" name="{{ dateOption.guid }}" value="{{ option.jsFormat }}" ng-click="go.update()"> </super-input-radio> </div> </li> </ul> <div class="example-string"> <label>Example:</label> {{ vm.displayString }} </div> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-box-resizer/box-resizer.html",'<div class="cmp-box-resizer"> <super-button smp ss-icon="times" ng-click="onDelete()"></super-button> <span class="handle-N-S"></span> <span class="handle-E-W"></span> <span class="handle-NW"></span> <span class="handle-NE"></span> <span class="handle-SW"></span> <span class="handle-SE"></span> <div class="box-options" ng-if="box.type != \'text\' && box.type != \'checkbox\'" ss-bind-html="vm.optionsTemplate" ng-mousedown="$event.stopPropagation()"></div> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-box-text-options/box-text-options.html",'<div class="cmp-box-text-options"> <span ng-repeat="guid in box.formFieldGuids" ng-bind="guid"></span> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-step-checkbox-display/step-checkbox-display.html",'<div class="cmp-step-checkbox-display"> <div class="group" ng-repeat="field in step.fields"> <div class="field gd-row"> <label class="title" ng-bind="field.uniqueLabel" ss-toggle="field-items"></label> <ul class="field-items"> <li class="field-item" ng-repeat="opt in field._options"> <label> <span class="option-label" ng-bind="opt" title="{{:: opt}}"></span> <span class="add-status"> <super-button class="add" small label="Set" ng-if="vm.routeVm.selectedBox.formFieldGuids[0] !== field.id || vm.routeVm.selectedBox.matchValue !== opt" ng-click="go.selectOption(field, opt)"></super-button> <span class="added" ss-icon="check" ng-if="vm.routeVm.selectedBox.formFieldGuids[0] === field.id && vm.routeVm.selectedBox.matchValue === opt"></span> </span> </label> </li> </ul> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-step-date-display/step-date-display.html",'<div class="cmp-step-date-display"> <div class="group"> <div class="field gd-row" ng-repeat="field in step.fields"> <label class="field-label gd-75p" ng-bind="field.uniqueLabel" title="{{:: field.uniqueLabel}}"></label> <span class="add-status gd-25p"> <super-button class="set" small ng-if="!field.isAdded" label="Set" ng-click="go.selectOption(field)"></super-button> <span class="added" ss-icon="check" ng-if="field.isAdded"></span> </span> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-step-text-display/step-text-display.html",'<div class="cmp-step-text-display"> <div class="group" ng-repeat="group in vm.groups" ng-if="group != null"> <label ng-bind="go.getGroupFriendlyTitle(group)" class="title" ss-toggle="fields" ss-toggle-start-expanded="true"></label> <ul class="fields"> <li class="field gd-row" ng-repeat="field in go.getFields(group)"> <super-input-checkbox title="{{:: field.uniqueLabel }}" label="{{:: field.uniqueLabel }}" model="field.isAdded" ng-click="go.selectField(field)"></super-input-checkbox> </li> </ul> </div> <div class="group" ng-if="go.getFields().length"> <div class="field gd-row" ng-repeat="field in go.getFields()"> <div class="gd-row"> <span ng-if="field.uniqueLabel.length > vm.displayTextLimit" class="toggle-custom-field gd-10p fa-caret-{{ field.isOpen ? \'down\' : \'right\' }}" ng-click="field.isOpen = !field.isOpen"></span> <span ng-if="field.uniqueLabel.length <= vm.displayTextLimit" class="gd-10p">&nbsp;</span> <super-input-checkbox class="gd-90p field" label="{{:: field.uniqueLabel }}" model="field.isAdded" ng-click="go.selectField(field)"></super-input-checkbox> </div> <div class="text-container" ng-show="field.isOpen" ng-class="{\'long\': field.uniqueLabel.length > vm.displayTextLimit}">{{:: field.uniqueLabel }}</div> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("components/cmp-toolbox/toolbox.html",'<div class="cmp-toolbox"> <ul class="tools" ng-show="routeVm.formTemplate._printPreviewDefinition && routeVm.formTemplate._printPreviewDefinition.templateFileId"> <li ng-repeat="t in vm.tools" ng-click="routeVm.selectedTool = t" ng-class="{selected: routeVm.selectedTool === t}" ss-tool-tip="{{t.title}}"><span ss-icon="{{t.icon}}"></span></li> </ul> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/segment-content/content.html",'<section class="segment-routes-index-content"> <aside> <cmp-toolbox></cmp-toolbox> </aside> <section> </section> <aside> </aside> </section> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/segment-data-panel/data-panel.html",'<div class="segment-index-data-panel" aria-label="print view builder data"> <ul class="steps" ng-show="routeVm.formTemplate._printPreviewDefinition && routeVm.formTemplate._printPreviewDefinition.templateFileId"> <li class="step-panel" ng-repeat="step in vm.steps"> <h4 class="step-title" ng-bind="step._name || \'Workflow Step \' + ($index + 1)"></h4> <cmp-step-text-display step="step" ng-if="routeVm.selectedBox.type === \'text\'"></cmp-step-text-display> <cmp-step-date-display step="step" ng-if="routeVm.selectedBox.type === \'date\'"></cmp-step-date-display> <cmp-step-checkbox-display step="step" ng-if="routeVm.selectedBox.type === \'checkbox\'"></cmp-step-checkbox-display> </li> </ul> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){
e.put("routes/index/segment-header/header.html",'<header class="segment-index-header"> <div class="gd-row form-title-actions-group" ss-window-anchor> <div class="gd-70p form-title-group" aria-label="form name section"> <fieldset> <div class="form-name gd-row"> <div class="icon"><i ss-icon-before="{{routeVm.formTemplate._isEmployeeInitiated ? \'li-form-e-large\' : \'li-form-large\'}}" role="presentation"></i></div> <div class="form-title-ctrl" ng-class="{\'is-editing\' : vm.editTitle}"> <span class="locked-state" title="{{ vm.formTitle }}" ng-bind="vm.formTitle"></span> <super-input-text id="formTitle" edit-mode="vm.editTitle" model="vm.formTitle" ss-validate="validator.required(vm.formTitle, \'form name\')"></super-input-text> </div> <div class="form-title-edit-actions"> <button type="button" ng-if="!vm.editTitle" class="edit" ss-icon="pencil" ng-click="go.editTitle()" aria-label="edit the form name"></button> <button type="button" ng-if="vm.editTitle" class="save" ss-icon="check-circle" ng-click="go.confirmTitleEdit()" aria-label="save the form name"></button> <button type="button" ng-if="vm.editTitle" class="cancel" ss-icon="times" ng-click="go.cancelTitleEdit()" aria-label="cancel edit for form name"></button> </div> <div class="form-status" ng-bind="routeVm.formTemplate.statusLabel"></div> </div> </fieldset> </div> <div class="gd-30p form-control-actions" aria-label="form save amd activate section"> <fieldset> <a class="form-preview" href="" ng-click="go.preview()">Preview</a> <div class="form-activate"> <super-button label="Activate" ss-icon-after="angle-down" ss-menu="activate-menu" ng-disabled="routeVm.saving"></super-button> <div class="select-menu activate-menu"> <ul class="select-menu-list"> <li class="select-menu-list-item" ng-click="go.activateNow()"> <p>Activate Immediately</p><small>Will become sendable</small></li> <li class="select-menu-list-item gd-row"> <div class="gd-55p" ng-click="go.activateOnDate()"> <p>Activate On</p><small>Set a future \'active\' date</small></div> <div class="gd-45p"> <super-input-datepicker model="vm.activationDate"></super-input-datepicker> </div> </li> </ul> </div> </div> <div class="form-save"> <strong ng-show="vm.autoSaved" class="auto-saved">Auto Saved</strong> <super-button class="save-button" pri label="{{routeVm.saving ? \'Saving\' : \'Save\'}}" type="submit" ng-class="{\'saving\': routeVm.saving}" ng-disabled="!routeVm.formTemplate.$isDirty() || routeVm.saving" ss-icon="spinner"></super-button> </div> </fieldset> </div> </div> </header> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/segment-print-builder/print-builder.html",'<div class="segment-index-print-builder" aria-label="print view builder" ss-pending="vm.processing"> <div class="overlay-content"> <div class="uploader"> <div ng-show="!routeVm.formTemplate._printPreviewDefinition || !routeVm.formTemplate._printPreviewDefinition.templateFileId"> <h4>Add a file to the builder:</h4> <div class="upload-action-group"> <button class="add-attachment super-button std upload" value="" title="Upload PDF"><label>Upload PDF</label></button> <input class="btn" id="underlay-uploader" type="file" nv-file-select name="fileUpload" uploader="uploader"> </div> </div> <div ng-show="routeVm.formTemplate._printPreviewDefinition.templateFileId"> <label class="file-name" ng-bind="vm.file._filename" title="{{ vm.file._filename }}"></label> <super-button label="Remove" ss-icon="trash-o" ng-click="go.remove()" ng-show="vm.showPager && vm.explodedImageUrls.length"> </super-button> </div> </div> <div ng-show="routeVm.formTemplate._printPreviewDefinition && routeVm.formTemplate._printPreviewDefinition.templateFileId"> <div ng-show="vm.showPager && vm.explodedImageUrls.length" class="pager"> <button class="prev" type="button" value="Previous" ng-click="go.previousPage()" ng-disabled="vm.currentPage === 1" ss-icon="chevron-left"></button> <span class="page">Page {{ vm.currentPage }} of {{ vm.explodedImageUrls.length; }}</span> <button class="next" type="button" value="Next" ng-click="go.nextPage()" ng-disabled="vm.currentPage === vm.explodedImageUrls.length" ss-icon="chevron-right"></button> </div> <div class="mapping-canvas" ng-class="{\'box-selected\': routeVm.selectedBox != null}" ng-click="routeVm.selectedBox = null" ss-pending="vm.processing" ss-pending-status="\'Please Wait\'"> <cmp-box-resizer ng-repeat="data in vm.data" box="data" text="data.templateString" is-active="data === routeVm.selectedBox" is-drawing="data === vm.drawingBox" ng-class="{selected: data === routeVm.selectedBox}" ng-mousedown="go.selectBox(data, $event)" ng-click="go.selectBox(data, $event)" on-delete="go.removeBox(data)" title="{{ data.templateString || data.matchValue }}"></cmp-box-resizer> <cmp-box-creator starting-point="vm.newBoxStartingPoint" box-created="go.createdBox($box)"> </cmp-box-creator> <canvas ng-style="{{ go.calculateImageWidth() }}"></canvas> <ul class="pages"> <li ng-repeat="img in vm.explodedImageUrls" ng-class="{\'visible\': vm.currentPage === $index+1}"> <img ng-show="vm.currentPage === $index+1" cross-origin="anonymous" ng-src="{{ img }}" class="bg-image" ng-style="{{ go.calculateImageWidth() }}"> </li> </ul> </div> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("ec-printviewbuilder-templates")}catch(t){e=angular.module("ec-printviewbuilder-templates",[])}e.run(["$templateCache",function(e){e.put("routes/index/segment-toolbox/toolbox.html",'<div class="segment-index-toolbox" aria-label="print view builder tools" ss-window-anchor> <ul class="tools" ng-show="routeVm.formTemplate._printPreviewDefinition && routeVm.formTemplate._printPreviewDefinition.templateFileId"> <li ng-repeat="t in vm.tools" ng-click="routeVm.selectedTool = t" ng-class="{selected: routeVm.selectedTool === t}" ss-tool-tip="{{t.title}}"><span ss-icon="{{t.icon}}"></span></li> </ul> </div> ')}])}()},{}],20:[function(e,t,n){"use strict";var o=e("base-state"),i={},r={url:"/:formTemplateId",templateUrl:"routes/index/index.html",resolve:{getTemplate:["$rootScope","$stateParams","ssPermissionsSvc","ssAsync","ssStringHlp","ssFormTemplatesApi","ssFileApi","ssEnum",function(e,t,n,o,r,a,l,s){function c(e,t){return null!=t?u.has(e+" ("+t+")")?c(e,++t):(u.add(e+" ("+t+")"),e+" ("+t+")"):u.has(e)?c(e,2):u.has(e)?void 0:(u.add(e),e)}var u=new Set;return o(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t.formTemplateId){o.next=2;break}return o.abrupt("return");case 2:return o.next=4,a.get({id:t.formTemplateId,include:"steps,formFields,files"});case 4:i.formTemplate=o.sent,i.canViewOverlayBuilder=n.isPermittedAction("formTemplates","buildOverlay")||!!e.isPermitted.activeUser.idmAdministrator,i.formTemplate._formFields.filter(function(e){return e._active}).forEach(function(e){e.uniqueLabel=c(e._label||"field"),e.uniqueKey=r.toCamelCase(e.uniqueLabel.replace(/[^\w]/g," ")),e.uniqueId="id"+e.id.split("-").join(""),e.config=JSON.parse(e._configJson),"super-select-list"===e._fieldType&&e.config.externalSource&&"enum"===e.config.externalSourceType&&(e._options=s[e.config.externalSource].names())});case 7:case"end":return o.stop()}},o,this)}))()}],org:["ssAsync","ssOrganizationSvc","ssToastHlp",function(e,t,n){return e(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getActiveOrg();case 3:i.org=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n.error("There was an error retrieving organization data. Due Dates may not display. Please see the console for more detail.","",!1);case 9:case"end":return e.stop()}},e,this,[[0,6]])}))()}],$title:function(){return"Frontline Central"}},$permissions:function(e){return!!e.permittedActions.activeUser.idmAdministrator||!!e.permittedActions.formTemplates.buildOverlay}};angular.module("ec-printviewbuilder").config(["$stateProvider",function(e){e.state("base.index",new o.State(r,i))}])},{"base-state":13}],21:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-segment"),s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$injector","$scope",function(e,t){var n=t.routeVm,o=(e.get("segmentIndexToolboxLogic"),t.vm={tools:[{type:"text",icon:"pencil-square",title:"Text Box"},{type:"date",icon:"calendar",title:"Date Picker"},{type:"checkbox",shape:"square",icon:"check-square",title:"CheckBox"}]});n.selectedTool=o.tools[0];t.go={}}]}]),t}(l.Segment);angular.module("ec-printviewbuilder-segments").directive("segmentRoutesIndexContent",function(){return new s("content")})},{"base-segment":12}],22:[function(e,t,n){"use strict";function o(){return{}}angular.module("ec-printviewbuilder-segment-logic").factory("segmentRoutesIndexContentLogic",o)},{}],23:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return t.split(",").map(function(t){return e.find(function(e){return e.id===t})}).filter(function(e){return null!=e})}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("base-segment"),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"controller",value:["$injector","$scope","rAF","ssEventSvc",function(e,t,n,o){function i(e){var t=c.selectedBox.formFieldGuids.indexOf(e.id);t>=0?c.selectedBox.formFieldGuids.splice(t,1):c.selectedBox.formFieldGuids.push(e.id)}function r(e,t){c.selectedBox.formFieldGuids=[e.id],null!=t&&(c.selectedBox.matchValue=t)}function l(e){p.forEach(function(t){switch(c.selectedBox.type){case"text":case"date":t.isAdded=e.includes(t.uniqueId)}})}function s(e){u.fieldGroups=[],u.steps=a(c.formTemplate._steps,c.formTemplate._stepOrder),u.steps.forEach(function(t){t.fields=a(p,t._fieldOrder).filter(function(t){return d[e.type].includes(t._fieldType)}).filter(function(e){return e._active&&e._label.length>0}),u.fieldGroups=u.fieldGroups.concat(t.fields.map(function(e){return e._fieldGroup}))}),u.fieldGroups=u.fieldGroups.filter(function(e,t,n){return n.indexOf(e)===t}).filter(function(e){return!!e}),u.steps=u.steps.filter(function(e){return e.fields.length})}var c=t.routeVm,u=(e.get("segmentIndexDataPanelLogic"),t.vm={steps:[],fields:[],fieldGroups:[]});t.go={};o.on("pvb.select-field",i,t),o.on("pvb.select-option",r,t);var p=c.formTemplate._formFields.filter(function(e){return e._active}),d={text:["heading","readOnlyHeading","super-select-list","super-input-text","super-input-redacted","readOnlyText","super-digital-signature","text"],date:["super-input-datepicker","readOnlyDate"],checkbox:["cmp-checkbox-group","super-select-list"]};t.$watch("routeVm.selectedBox",function(e){null!=e&&(s(e),l(e._template||""))}),t.$watch("routeVm.selectedBox._template",function(e){null!=e&&l(e)})}]}]),t}(s.Segment);angular.module("ec-printviewbuilder-segments").directive("segmentIndexDataPanel",function(){return new c("data-panel")})},{"base-segment":12}],24:[function(e,t,n){"use strict";function o(){return{}}angular.module("ec-printviewbuilder-segment-logic").factory("segmentIndexDataPanelLogic",o)},{}],25:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-segment"),s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$injector","$scope","ssAsync","rAF","$q","$timeout","ssToastHlp","ssStatusApi","$location","ssDateByOrgHlp","ssModalSvc",function(e,t,n,o,i,r,a,l,s,c,u){var p=t.routeVm,d=e.get("segmentIndexHeaderLogic"),f=t.vm={formTitle:p.formTemplate._name,activationDate:c.todaysStartRelativeTo(p.org).format("MM/DD/YYYY"),activate:null,editTitle:!1,autoSaved:!1};t.validator=d.validator;var m=t.go={editTitle:function(){f.editTitle=!0,f.previousAutoSaved=f.autoSaved,o.raw(d.resizeTitle)},confirmTitleEdit:function(){""!==f.formTitle&&(f.editTitle=!1,f.currentValue=f.formTitle)},cancelTitleEdit:function(){f.editTitle=!1,f.formTitle=f.currentValue,f.autoSaved=f.previousAutoSaved},preview:function(){var e="/ec-formbuilder/form/"+p.formTemplate.id+"/preview?returnUrl=/ec-printviewbuilder/"+p.formTemplate.id;if(!p.saving){if(p.formTemplate.$isDirty()){var t={title:"Preview Form Template",content:"You will need to save this form template in order to preview it.",primaryText:"save and continue",secondaryText:"cancel"};return u.showStandard(t).then(function(t){m.saveFormTemplate().then(function(){s.url(e)})})}s.url(e)}},saveFormTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(p.saving||!p.formTemplate.$isDirty())return i.when();return p.saving=!0,f.editTitle=!1,p.formTemplate._name=f.formTitle,n(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.formTemplate._steps.$save(!1,!e);case 3:return null!=p.updateStepOrder&&p.updateStepOrder(),t.next=6,p.formTemplate.$save(!0,!e);case 6:return null!=p.updateFieldOrder&&p.updateFieldOrder(),t.next=9,p.formTemplate._steps.$save(!1,!e);case 9:f.autoSaved=e,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:return t.prev=14,p.saving=!1,t.finish(14);case 18:case"end":return t.stop()}},t,this,[[0,12,14,18]])}))()},activateNow:function(){f.activationDate=null,f.statusConfig={statusId:1},m.activateOnDate()},activateOnDate:function(){if(!p.saving){if(!p.formTemplate._formAdministrator.formAdministratorType)return a.error("Form Administrator is required","Select Form Administrator"),t.$root.$emit("ss-menu-close"),void(p.saving=!1);if(!p.formTemplate._stepOrder||p.formTemplate._stepOrder.includes("undefined"))return void a.error("The form template does not have a valid step order","");var e=p.formTemplate._stepOrder.slice(0,p.formTemplate._stepOrder.indexOf(","));if(!p.formTemplate._steps.find(function(t){return t.id===e})._fieldOrder.length)return void a.warn("Step 1 of this form template contains no fields. Please add fields in order to activate.","");for(var o=0;o<p.formTemplate._steps.length-1;o++){var i=p.formTemplate._steps[o];if(3!==i._stepAction){if(null==i._stepParticipant.participantType)return a.error("Step Participant is required for each step","Activation Failed"),t.$root.$emit("ss-menu-close"),void(p.saving=!1);if(null==i._stepAction)return a.error("Action Performed is required for each step","Activation Failed"),t.$root.$emit("ss-menu-close"),void(p.saving=!1)}}if(null==p.formTemplate._category.id)return a.error("Category is required to activate this form.","Activation Failed"),t.$root.$emit("ss-menu-close"),p.saving=!1,void s.url("/ec-formbuilder/form/{{routeVm.formTemplate.id}}/settings");null!==f.activationDate&&(f.statusConfig.from=c.startOfDayRelativeTo(moment(f.activationDate),p.org)),n(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.saveFormTemplate();case 2:return e.prev=2,p.saving=!0,e.next=6,l.update({id:p.formTemplate.id},f.statusConfig,!1);case 6:s.url("/ec-forms"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),t=e.t0.data.errors.Title.substr(e.t0.data.errors.Title.indexOf(":")+1),t=t.split(","),t.forEach(function(e){a.error(e,"Activation Failed")});case 14:return e.prev=14,p.saving=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[2,9,14,17]])}))()}}};p.saveFormTemplate=m.saveFormTemplate,t.$watch("vm.formTitle",function(e,t){e===t&&(f.currentValue=t),o.raw(d.resizeTitle)})}]}]),t}(l.Segment);angular.module("ec-printviewbuilder-segments").directive("segmentIndexHeader",function(){return new s("header")})},{"base-segment":12}],26:[function(e,t,n){"use strict";function o(e){function t(){var e,t=document.querySelectorAll(".form-title-ctrl"),n=angular.element(t[0]).find("input");null!=n.val()&&(e=n.val().length,n.attr("size",e))}return{resizeTitle:t,validator:{required:e.required()}}}o.$inject=["ssValidationHlp"],angular.module("ec-printviewbuilder-segment-logic").factory("segmentIndexHeaderLogic",o)},{}],27:[function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=e("base-segment"),p=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"controller",value:["$injector","$scope","$state","$stateParams","$interpolate","$log","rAF","ssAsync","FileUploader","ssAuthSvc","ssToastHlp","ssFormTemplatesApi","ssFileApi","ssModalSvc","ssPermissionsSvc","viewportOffsetHlp",function(e,t,n,i,r,a,c,u,p,d,f,m,g,v,b,h){function y(e){e>$.explodedImageUrls&&(e=$.explodedImageUrls.length),e<1&&(e=1),w(e),$.currentPage=e,$.showPager=!0,t.$emit("canvas-resize")}function x(e){return{pageNumber:$.currentPage-1,pageObjects:e.map(function(e){return{fieldType:e.type,locationY:e.top,locationX:e.left,width:100-e.right-e.left,height:100-e.bottom-e.top,formFieldGuids:e.formFieldGuids,matchValue:e.matchValue,stringFormat:e.stringFormat||null}})}}function w(e){var t,n=_.formTemplate._printPreviewDefinition;$.data=[],null!=n&&null!=n.printPreviewPages&&0!==n.printPreviewPages.length&&(t=n.printPreviewPages,$.data=s.definitiontoLocalData(t[e-1],$.labelsById))}function T(e){null!=e._file.size&&e._file.size>=0&&e._file.size<=O?($.processing=!0,m.attachFile({},{filename:e.file.name,fileType:k}).then(function(n){t.ctxDomEl.style.display="block",$.file=n,$.file.filename=n._filename,e.updatedUrl=m.getUploadFileUrl({id:$.file.id}),e.upload(),$.processing=!0})):(f.error(j,P),V.queue.length=0)}l=r;var _=t.routeVm;t.viewportOffsetHlp=h,s=e.get("segmentIndexPrintBuilderLogic");var O=52428800,j="The file upload size cannot exceed 50MB. Please upload a smaller file.",P="File Upload Failed",k=3;_.selectedBox=null;var F={title:"You will lose all your overlay mappings",content:"Uploading a new file will result in losing all the mappings done on the current form.",primaryText:"Continue",secondaryText:"Cancel"},$=t.vm={showPager:!1,explodedImageUrls:[],currentPage:-1,bgImageLoaded:!1,newBoxStartingPoint:null,labelsById:_.formTemplate._formFields.reduce(function(e,t){return e["id"+t.id.split("-").join("")]=""+t.uniqueLabel,e},{}),idsByKey:_.formTemplate._formFields.reduce(function(e,t){return e[t.uniqueKey]="id"+t.id.split("-").join(""),e},{}),data:[],showOverlay:!1,processing:!1,canViewOverlayBuilder:!1};$.canViewOverlayBuilder=b.isPermittedAction("formTemplates","buildOverlay")||!!t.$root.isPermitted.activeUser.idmAdministrator;var S=t.go={nextPage:function(){$.explodedImageUrls.length!==$.currentPage&&($.currentPage++,y($.currentPage))},previousPage:function(){1!==$.currentPage&&($.currentPage--,y($.currentPage))},selectBox:function(e,t){_.selectedBox=e,null!=t&&t.stopPropagation()},createdBox:function(e){e.type=_.selectedTool.type,e.shape=_.selectedTool.shape,e.template="",e.formFieldGuids=[],$.data=[].concat(o($.data),[e]),c(function(){return S.selectBox(e)},t)},removeBox:function(e){$.data=$.data.filter(function(t){return t!==e})},save:function(){_.formTemplate.$save().then(function(e){a.info("Saved changes!")},function(e){a.error(e),f.error("Template save failed.")})},calculateImageWidth:function(){return{"max-width":t.canvasWidth+"px"}},remove:function(){var e={title:"You will lose all your overlay mappings",content:"Removing this file will result in losing all the mappings done on the current form.",primaryText:"Continue",secondaryText:"Cancel"};v.showDestructive(e).then(function(){$.processing=!0,s.removeFile(_.formTemplate).then(function(e){_.selectedBox=null,$.explodedImageUrls=0,t.ctxDomEl.style.display="none",$.processing=!1})})}};t.$watch("vm.data",function(e,t){if(null!=e&&0!==e.length&&e!==t&&null!=_.formTemplate._printPreviewDefinition){var n=$.currentPage-1;_.formTemplate._printPreviewDefinition.printPreviewPages[n]=x(e),_.formTemplate.$$forceChangedState("_printPreviewDefinition")}},!0),_.formTemplate._printPreviewDefinition&&t.routeVm.formTemplate._printPreviewDefinition.templateFileId&&u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getFile({id:t.routeVm.formTemplate._printPreviewDefinition.templateFileId});case 2:$.file=e.sent,$.explodedImageUrls=$.file._explodedImageUrls,c.raw(function(){document.querySelector(".pages img:first-child").onload=function(){$.bgImageLoaded=!0,t.$digest(),t.$emit("canvas-resize")}});case 5:case"end":return e.stop()}},e,this)}))();var V=t.uploader=new p({withCredentials:!1,headers:{Authorization:"Bearer "+d.token.access}});V.onAfterAddingFile=function(e){$.explodedImageUrls.length?v.showDestructive(F).then(function(){T(e)},function(){e.cancel(),e.remove(),document.getElementById("underlay-uploader").value=""}):T(e)},V.onBeforeUploadItem=function(e){e.url=e.updatedUrl},V.onErrorItem=function(e,t,n,o){$.processing=!1,f.error("The selected file did not upload correctly. Please try again.",P)},V.onCancelItem=function(e,t,n,o){$.processing=!1,f.info("File upload cancelled."),$.bgImageLoaded=!1},V.onSuccessItem=function(e,o,r,a){u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.associateFile({id:t.routeVm.formTemplate.id},{fileId:$.file.id});case 3:return null==t.routeVm.formTemplate._printPreviewDefinition&&(t.routeVm.formTemplate._printPreviewDefinition={}),t.routeVm.formTemplate._printPreviewDefinition.templateFileId=$.file.id,t.routeVm.formTemplate._printPreviewDefinition.explodedFileSegmentIds=o.explodedImageUrls,t.routeVm.formTemplate._printPreviewDefinition.printPreviewPages=o.explodedImageUrls.map(function(e){return{pageNumber:0,pageObjects:[]}}),e.next=9,t.routeVm.formTemplate.$save();case 9:$.showOverlay=!0,$.explodedImageUrls=o.explodedImageUrls,n.go(n.current,i,{reload:!0,inherit:!1}),$.bgImageLoaded=!0,$.loading=!$.bgImageLoaded,$.showPager=!0,$.processing=!1,e.next=20;break;case 18:e.prev=18,e.t0=e.catch(0);case 20:case"end":return e.stop()}},e,this,[[0,18]])}))()},y(1)}]},{key:"link",value:function(e,t,n){function o(){var e=v.clientWidth;e!==T&&a(e)}function i(){e.$root.safeApply(function(){return f.newBoxStartingPoint=null})}function r(t){if(c(),null==m.selectedBox){var n=h[0].getBoundingClientRect();e.$root.safeApply(function(){var o=e.viewportOffsetHlp.getViewportOffsets(window);f.newBoxStartingPoint={x:t.pageX-n.left-o.left,y:t.pageY-n.top-o.top}})}}function a(t){var n=document.querySelector(".pages .visible img"),o=0;n&&(w=n.height/n.width,t=n.width,o=n.height),t>d&&(t=d),0===o&&(o=t*w),T=t,_=o,y.width=e.canvasWidth=y.style.width=T,y.height=e.canvasHeight=y.style.height=_,c()}function c(){x.clearRect(0,0,T,_),e.vm.data instanceof Array&&(x.fillStyle="#000000",e.vm.bgImageLoaded?(x.strokeStyle="#000000",x.lineWidth=2,e.vm.data=e.vm.data.filter(function(t){return 100-t.left-t.right>1||t===e.vm.drawingBox}),e.vm.data.forEach(u)):x.fillRect(0,0,T,_))}function u(t){var n=p(t),o=t.type;if("checkbox"===o&&(o+=":"+t.shape),["text","date"].includes(o)){if(n.width<10||n.height<10)return;var i;try{t._template="{{"+t.formFieldGuids.map(function(e){return"id"+e.split("-").join("")}).join("}} {{")+"}}",i=l(t._template)(e.vm.labelsById),t.templateString=s.convertBracketValueToCsv(i)}catch(e){i="TEMPLATE ERROR"}x.font="12px monospace";for(var r=n.top+n.height,a=x.measureText(i).width;a>n.width;)i=i.slice(0,-1),a=x.measureText(i).width;x.fillText(i,n.left,r)}}function p(e){var t={},n=_/100,o=T/100;return t.top=n*e.top,t.right=o*(100-e.right),t.bottom=n*(100-e.bottom),t.left=o*e.left,t.width=t.right-t.left,t.height=t.bottom-t.top,t.top<0&&(t.top=0),t.left<0&&(t.left=0),t}var d=907,f=e.vm,m=e.routeVm,g=angular.element(window),v=t[0],b=t.find("canvas"),h=angular.element(v.getElementsByClassName("mapping-canvas")[0]),y=b[0];e.ctxDomEl=y;var x=y.getContext("2d"),w=1.6471,T=y.offsetWidth,_=0;a(h.width),g.on("resize",o),e.$on("$destroy",function(){return g.off("resize",o)}),e.$on("canvas-resize",function(){return o()}),sidekick.events.on("nav.expanded-footprint",function(){setTimeout(function(){return o()},0)}),b.on("mousedown",r),b.on("mouseup",i),e.$watch("vm.data",c,!0),e.$watch("vm.bgImageLoaded",c)}}]),t}(u.Segment);angular.module("ec-printviewbuilder-segments").directive("segmentIndexPrintBuilder",function(){return new p("print-builder")})},{"base-segment":12}],28:[function(e,t,n){"use strict";function o(e,t,n){function o(e,t){if(null!=e)return e.pageObjects.map(function(e){var o={type:e.fieldType||"text",top:e.locationY,left:e.locationX,right:100-(e.width+e.locationX),bottom:100-(e.height+e.locationY),formFieldGuids:e.formFieldGuids,stringFormat:e.stringFormat||null,matchValue:e.matchValue};if(["text","date"].includes(o.type)){o._template="{{"+e.formFieldGuids.map(function(e){return"id"+e.split("-").join("")}).join("}} {{")+"}}";var i=n(o._template)(t);o.templateString=r(i)||""}return o})}function i(e){return t(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._files.find(function(t){return t._fileId===e._printPreviewDefinition.templateFileId}),t.next=3,n.$remove();case 3:return e._printPreviewDefinition.printPreviewPages=[],e._printPreviewDefinition.templateFileId=null,t.next=7,e.$save();case 7:return t.next=9,e.$refresh();case 9:case"end":return t.stop()}},t,this)}))()}function r(e){return e.length?e.split("] [").join(",").replace("[","").replace("]",""):""}return{definitiontoLocalData:o,removeFile:i,convertBracketValueToCsv:r}}o.$inject=["ssFormTemplatesApi","ssAsync","$interpolate"],angular.module("ec-printviewbuilder-segment-logic").factory("segmentIndexPrintBuilderLogic",o)},{}],29:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("base-segment"),s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"controller",value:["$injector","$scope",function(e,t){var n=t.routeVm,o=(e.get("segmentIndexToolboxLogic"),t.vm={tools:[{type:"text",icon:"pencil-square",title:"Text Box"},{type:"date",icon:"calendar",title:"Date Picker"},{type:"checkbox",shape:"square",icon:"check-square",title:"CheckBox"}]});n.selectedTool=o.tools[0];t.go={}}]}]),t}(l.Segment);angular.module("ec-printviewbuilder-segments").directive("segmentIndexToolbox",function(){return new s("toolbox")})},{"base-segment":12}],30:[function(e,t,n){"use strict";function o(){return{}}angular.module("ec-printviewbuilder-segment-logic").factory("segmentIndexToolboxLogic",o)},{}]},{},[1]);